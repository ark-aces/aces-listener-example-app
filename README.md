# ACES Encoded Listener Demo App

This application demos how to connect to encoded listeners and
receive blockchain events using the Encoded Listener SDKs.

## Dependencies

This application connects to two Encoded Listeners (one for Ark
transactions and one for Bitcoin transactions) running locally
on different ports.

- [Bitcoin Encoded Listener](https://github.com/ark-aces/aces-encoded-listener-bitcoin) on port `9090`
- [Ark Encoded Listener](https://github.com/ark-aces/aces-encoded-listener-ark) on port `9091`
 

## Starting Application

Start application:

```
mvn spring-boot run
```

Console output:

```
2017-11-28 20:48:20.021  INFO 27657 --- [           main] c.a.e.DemoApp                            : Starting DemoApp on brady-SVS1512DCXB with PID 27657 (/home/brady/projects/encoded-listener-example-app/target/classes started by brady in /home/brady/projects/encoded-listener-example-app)
2017-11-28 20:48:20.027  INFO 27657 --- [           main] c.a.e.DemoApp                            : No active profile set, falling back to default profiles: default
2017-11-28 20:48:20.245  INFO 27657 --- [           main] ationConfigEmbeddedWebApplicationContext : Refreshing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@4461c7e3: startup date [Tue Nov 28 20:48:20 PST 2017]; root of context hierarchy
2017-11-28 20:48:24.001  INFO 27657 --- [           main] s.b.c.e.t.TomcatEmbeddedServletContainer : Tomcat initialized with port(s): 8080 (http)
2017-11-28 20:48:24.022  INFO 27657 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2017-11-28 20:48:24.032  INFO 27657 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet Engine: Apache Tomcat/8.5.23
2017-11-28 20:48:24.112  INFO 27657 --- [ost-startStop-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2017-11-28 20:48:24.113  INFO 27657 --- [ost-startStop-1] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 3880 ms
2017-11-28 20:48:24.246  INFO 27657 --- [ost-startStop-1] o.s.b.w.servlet.ServletRegistrationBean  : Mapping servlet: 'dispatcherServlet' to [/]
2017-11-28 20:48:24.250  INFO 27657 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'characterEncodingFilter' to: [/*]
2017-11-28 20:48:24.251  INFO 27657 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'hiddenHttpMethodFilter' to: [/*]
2017-11-28 20:48:24.251  INFO 27657 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'httpPutFormContentFilter' to: [/*]
2017-11-28 20:48:24.251  INFO 27657 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'requestContextFilter' to: [/*]
2017-11-28 20:48:25.177  INFO 27657 --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : Looking for @ControllerAdvice: org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@4461c7e3: startup date [Tue Nov 28 20:48:20 PST 2017]; root of context hierarchy
2017-11-28 20:48:25.301  INFO 27657 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped "{[/ark-events],methods=[POST]}" onto public org.springframework.http.ResponseEntity<java.lang.Void> com.arkaces.encoded_listener_example_app.EventHandler.handleArkEvent(com.fasterxml.jackson.databind.JsonNode)
2017-11-28 20:48:25.302  INFO 27657 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped "{[/bitcoin-events],methods=[POST]}" onto public org.springframework.http.ResponseEntity<java.lang.Void> com.arkaces.encoded_listener_example_app.EventHandler.handleBitcoinEvent(com.fasterxml.jackson.databind.JsonNode)
2017-11-28 20:48:25.305  INFO 27657 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped "{[/error],produces=[text/html]}" onto public org.springframework.web.servlet.ModelAndView org.springframework.boot.autoconfigure.web.BasicErrorController.errorHtml(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)
2017-11-28 20:48:25.305  INFO 27657 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped "{[/error]}" onto public org.springframework.http.ResponseEntity<java.util.Map<java.lang.String, java.lang.Object>> org.springframework.boot.autoconfigure.web.BasicErrorController.error(javax.servlet.http.HttpServletRequest)
2017-11-28 20:48:25.337  INFO 27657 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped URL path [/webjars/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
2017-11-28 20:48:25.338  INFO 27657 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
2017-11-28 20:48:25.374  INFO 27657 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped URL path [/**/favicon.ico] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
2017-11-28 20:48:25.673  INFO 27657 --- [           main] o.s.j.e.a.AnnotationMBeanExporter        : Registering beans for JMX exposure on startup
2017-11-28 20:48:26.575  WARN 27657 --- [           main] c.a.e.DemoAppInitializer                 : Failed to subscribe with ark listener
2017-11-28 20:48:26.626  INFO 27657 --- [           main] s.b.c.e.t.TomcatEmbeddedServletContainer : Tomcat started on port(s): 8080 (http)
2017-11-28 20:48:26.633  INFO 27657 --- [           main] c.a.e.DemoApp                            : Started DemoApp in 7.525 seconds (JVM running for 8.952)
2017-11-28 20:48:37.839  INFO 27657 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring FrameworkServlet 'dispatcherServlet'
2017-11-28 20:48:37.839  INFO 27657 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : FrameworkServlet 'dispatcherServlet': initialization started
2017-11-28 20:48:37.858  INFO 27657 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : FrameworkServlet 'dispatcherServlet': initialization completed in 19 ms
2017-11-28 20:48:37.918  INFO 27657 --- [nio-8080-exec-1] c.a.e.EventHandler                       : Received event: "6c0d09c3e4f191d658befdd760ac9dd11d6c5d94a489731d3837e201a545cd2f"
2017-11-28 20:48:37.919  INFO 27657 --- [nio-8080-exec-1] c.a.e.EventHandler                       : Event data: "{\"txid\":\"6c0d09c3e4f191d658befdd760ac9dd11d6c5d94a489731d3837e201a545cd2f\",\"hash\":\"0e12d9d339d8283c002f6061153eb46cf745f8489a36a09449396bcd69974400\",\"version\":1,\"size\":172,\"vsize\":145,\"locktime\":0,\"vin\":[{\"coinbase\":\"03621013\",\"sequence\":4294967295}],\"vout\":[{\"value\":1.58173376,\"n\":0,\"scriptPubKey\":{\"asm\":\"OP_DUP OP_HASH160 dec1d3b4df83ec17879b1256134b577317986b00 OP_EQUALVERIFY OP_CHECKSIG\",\"hex\":\"76a914dec1d3b4df83ec17879b1256134b577317986b0088ac\",\"reqSigs\":1,\"type\":\"pubkeyhash\",\"addresses\":[\"n1pnVyVyycLjG7sFcHcjNzMYyJHfXDLAbm\"]}},{\"value\":0.0,\"n\":1,\"scriptPubKey\":{\"asm\":\"OP_RETURN aa21a9ede40faae5406354922a45ed8ad4da2952e4719384dc6781b159baaa3082555e21\",\"hex\":\"6a24aa21a9ede40faae5406354922a45ed8ad4da2952e4719384dc6781b159baaa3082555e21\",\"type\":\"nulldata\"}}],\"hex\":\"010000000001010000000000000000000000000000000000000000000000000000000000000000ffffffff0403621013ffffffff02c0886d09000000001976a914dec1d3b4df83ec17879b1256134b577317986b0088ac0000000000000000266a24aa21a9ede40faae5406354922a45ed8ad4da2952e4719384dc6781b159baaa3082555e210120000000000000000000000000000000000000000000000000000000000000000000000000\",\"blockhash\":\"0000000093b4a314d118c3fcf7912fa5a6546164d5a2eb59ddbdcd0d7089952f\",\"confirmations\":1,\"time\":1511930260,\"blocktime\":1511930260}"
2017-11-28 20:48:37.967  INFO 27657 --- [nio-8080-exec-2] c.a.e.EventHandler                       : Received event: "119dcf80e960d3427d096d57babec7017112beae7f1e7a664b0fca9149b943f9"
2017-11-28 20:48:37.967  INFO 27657 --- [nio-8080-exec-2] c.a.e.EventHandler                       : Event data: "{\"txid\":\"119dcf80e960d3427d096d57babec7017112beae7f1e7a664b0fca9149b943f9\",\"hash\":\"120358ace5802e69a9409e642292b2efdd92a8b59eccf00eede07a4ab3028b19\",\"version\":1,\"size\":248,\"vsize\":166,\"locktime\":0,\"vin\":[{\"txid\":\"5b1d6c68057b1dbd7e83fa3c5d276ed2fd4b2618d771690811b8212e439e7b82\",\"vout\":1,\"scriptSig\":{\"asm\":\"0014a53dc87a27829b6d1659e26d36ecd0d81ca5cfdd\",\"hex\":\"160014a53dc87a27829b6d1659e26d36ecd0d81ca5cfdd\"},\"txinwitness\":[\"3045022100d7312dfb4a2f7368df2b693eb709ce6e16508b8852081b5ad920bf305ce32004022016758b19a6406b8c0d36e58bead88ebbb64195b92911813c0126a9931d470adb01\",\"028e733e532d0afe68f71d91bc92431fcb28eea0ff10a8b1acd77175cd3d4c0494\"],\"sequence\":4294967295}],\"vout\":[{\"value\":3.0,\"n\":0,\"scriptPubKey\":{\"asm\":\"OP_HASH160 82d392d73dfd5256301d02440cf985059c464e42 OP_EQUAL\",\"hex\":\"a91482d392d73dfd5256301d02440cf985059c464e4287\",\"reqSigs\":1,\"type\":\"scripthash\",\"addresses\":[\"2N5AyHcWphSXVLgs7APbbGdE4CCc24PPKfk\"]}},{\"value\":1888.95969998,\"n\":1,\"scriptPubKey\":{\"asm\":\"OP_HASH160 9618b7ee34c27879c9dfa3e19bd8e33cb36739e2 OP_EQUAL\",\"hex\":\"a9149618b7ee34c27879c9dfa3e19bd8e33cb36739e287\",\"reqSigs\":1,\"type\":\"scripthash\",\"addresses\":[\"2N6vrxXcAFsweLih55izViyNMpkzQC3q2KQ\"]}}],\"hex\":\"01000000000101827b9e432e21b811086971d718264bfdd26e275d3cfa837ebd1d7b05686c1d5b0100000017160014a53dc87a27829b6d1659e26d36ecd0d81ca5cfddffffffff0200a3e1110000000017a91482d392d73dfd5256301d02440cf985059c464e4287cec213fb2b00000017a9149618b7ee34c27879c9dfa3e19bd8e33cb36739e28702483045022100d7312dfb4a2f7368df2b693eb709ce6e16508b8852081b5ad920bf305ce32004022016758b19a6406b8c0d36e58bead88ebbb64195b92911813c0126a9931d470adb0121028e733e532d0afe68f71d91bc92431fcb28eea0ff10a8b1acd77175cd3d4c049400000000\",\"blockhash\":\"0000000093b4a314d118c3fcf7912fa5a6546164d5a2eb59ddbdcd0d7089952f\",\"confirmations\":1,\"time\":1511930260,\"blocktime\":1511930260}"
2017-11-28 20:48:37.980  INFO 27657 --- [nio-8080-exec-3] c.a.e.EventHandler                       : Received event: "8c607089b7dd592584ea8be0ac855a356b229d7a91081fdc0da0d9f037efef5c"
2017-11-28 20:48:37.980  INFO 27657 --- [nio-8080-exec-3] c.a.e.EventHandler                       : Event data: "{\"txid\":\"8c607089b7dd592584ea8be0ac855a356b229d7a91081fdc0da0d9f037efef5c\",\"hash\":\"3782a23f35ef45c386f4037ba8864e917dccb6fd3ffaf9cdd9ef3729175cda82\",\"version\":1,\"size\":250,\"vsize\":168,\"locktime\":0,\"vin\":[{\"txid\":\"2d203812c3b69254dbecf7259ab29d0d9edbe13499ce78ada6c68a7d6323e086\",\"vout\":1,\"scriptSig\":{\"asm\":\"00146aaa89372fd36d48be7fdce7ce6def84f38811bd\",\"hex\":\"1600146aaa89372fd36d48be7fdce7ce6def84f38811bd\"},\"txinwitness\":[\"30450221009b062ce36b8ff090ec6b179e662570d0efe95bf7a74e208402dcd996b6a23ca802204e3c62fbc8bed633f6aa8762fb14865f0162441dfef1a20c74e6749620c4210c01\",\"029ee2bb9c5b67d91a8162da1f7e10378f9faf4ee9455f64250d51b26c0d8f5dcc\"],\"sequence\":4294967295}],\"vout\":[{\"value\":0.08125,\"n\":0,\"scriptPubKey\":{\"asm\":\"OP_DUP OP_HASH160 040f3e9f8d05c44ba3098b8fa544b50ced17b286 OP_EQUALVERIFY OP_CHECKSIG\",\"hex\":\"76a914040f3e9f8d05c44ba3098b8fa544b50ced17b28688ac\",\"reqSigs\":1,\"type\":\"pubkeyhash\",\"addresses\":[\"mftRG34CuaiednNMVgTQGwXx6VeKy7s1pk\"]}},{\"value\":1899.27170109,\"n\":1,\"scriptPubKey\":{\"asm\":\"OP_HASH160 d0915d54ea655c886fbe229acee6cbcacd3c036c OP_EQUAL\",\"hex\":\"a914d0915d54ea655c886fbe229acee6cbcacd3c036c87\",\"reqSigs\":1,\"type\":\"scripthash\",\"addresses\":[\"2NCG2gHvQMssMZANEAcjN77S3o5DPGCiLdY\"]}}],\"hex\":\"0100000000010186e023637d8ac6a6ad78ce9934e1db9e0d9db29a25f7ecdb5492b6c31238202d01000000171600146aaa89372fd36d48be7fdce7ce6def84f38811bdffffffff0248fa7b00000000001976a914040f3e9f8d05c44ba3098b8fa544b50ced17b28688ac3da08a382c00000017a914d0915d54ea655c886fbe229acee6cbcacd3c036c87024830450221009b062ce36b8ff090ec6b179e662570d0efe95bf7a74e208402dcd996b6a23ca802204e3c62fbc8bed633f6aa8762fb14865f0162441dfef1a20c74e6749620c4210c0121029ee2bb9c5b67d91a8162da1f7e10378f9faf4ee9455f64250d51b26c0d8f5dcc00000000\",\"blockhash\":\"0000000093b4a314d118c3fcf7912fa5a6546164d5a2eb59ddbdcd0d7089952f\",\"confirmations\":1,\"time\":1511930260,\"blocktime\":1511930260}"
2017-11-28 20:48:37.989  INFO 27657 --- [nio-8080-exec-4] c.a.e.EventHandler                       : Received event: "89c82a9a61ee6f17a344cb4f8128165ed6ee457c7e19d8a4da28bd24aa01297f"
2017-11-28 20:48:37.990  INFO 27657 --- [nio-8080-exec-4] c.a.e.EventHandler                       : Event data: "{\"txid\":\"89c82a9a61ee6f17a344cb4f8128165ed6ee457c7e19d8a4da28bd24aa01297f\",\"hash\":\"8f3cba281650eb98e8c05233b00a791a76504b1523d593afef35c39824c6439d\",\"version\":1,\"size\":249,\"vsize\":168,\"locktime\":0,\"vin\":[{\"txid\":\"cdf9d656ceae5c21b8319d36a9b6348d9ba9e016824f7ead677e04b52dde0d8d\",\"vout\":1,\"scriptSig\":{\"asm\":\"0014bd9c2064142cfd8c175a785f573fc09c31b258fc\",\"hex\":\"160014bd9c2064142cfd8c175a785f573fc09c31b258fc\"},\"txinwitness\":[\"3044022037ab32e1a71fb263678f889d46aae4197bfaa37e2f58c4f28a794b1a05bd77c502200dc4696348eed19c54b0a0bfe9c03f7d4ea2f7d11fa41c26e38a901596220b3c01\",\"03676275caebfd5f898adccc47bc973bf8a9ff72f88307dbb2bc56b56ec234421c\"],\"sequence\":4294967295}],\"vout\":[{\"value\":0.040625,\"n\":0,\"scriptPubKey\":{\"asm\":\"OP_DUP OP_HASH160 040f3e9f8d05c44ba3098b8fa544b50ced17b286 OP_EQUALVERIFY OP_CHECKSIG\",\"hex\":\"76a914040f3e9f8d05c44ba3098b8fa544b50ced17b28688ac\",\"reqSigs\":1,\"type\":\"pubkeyhash\",\"addresses\":[\"mftRG34CuaiednNMVgTQGwXx6VeKy7s1pk\"]}},{\"value\":1889.01959276,\"n\":1,\"scriptPubKey\":{\"asm\":\"OP_HASH160 546fff1559a0617f6447801c96cf6ceb03d5dfff OP_EQUAL\",\"hex\":\"a914546fff1559a0617f6447801c96cf6ceb03d5dfff87\",\"reqSigs\":1,\"type\":\"scripthash\",\"addresses\":[\"2Mzwgv3aqVgBrtPkuRwJAtHJVg3316WeYRR\"]}}],\"hex\":\"010000000001018d0dde2db5047e67ad7e4f8216e0a99b8d34b6a9369d31b8215caece56d6f9cd0100000017160014bd9c2064142cfd8c175a785f573fc09c31b258fcffffffff0224fd3d00000000001976a914040f3e9f8d05c44ba3098b8fa544b50ced17b28688ac6c266ffb2b00000017a914546fff1559a0617f6447801c96cf6ceb03d5dfff8702473044022037ab32e1a71fb263678f889d46aae4197bfaa37e2f58c4f28a794b1a05bd77c502200dc4696348eed19c54b0a0bfe9c03f7d4ea2f7d11fa41c26e38a901596220b3c012103676275caebfd5f898adccc47bc973bf8a9ff72f88307dbb2bc56b56ec234421c00000000\",\"blockhash\":\"0000000093b4a314d118c3fcf7912fa5a6546164d5a2eb59ddbdcd0d7089952f\",\"confirmations\":1,\"time\":1511930260,\"blocktime\":1511930260}"
2017-11-28 20:48:38.000  INFO 27657 --- [nio-8080-exec-5] c.a.e.EventHandler                       : Received event: "56af3a9ac72c4d64c3e682489abbf619333c3dfe18268998b2e9b25f49cc4281"
2017-11-28 20:48:38.000  INFO 27657 --- [nio-8080-exec-5] c.a.e.EventHandler                       : Event data: "{\"txid\":\"56af3a9ac72c4d64c3e682489abbf619333c3dfe18268998b2e9b25f49cc4281\",\"hash\":\"56af3a9ac72c4d64c3e682489abbf619333c3dfe18268998b2e9b25f49cc4281\",\"version\":2,\"size\":224,\"vsize\":224,\"locktime\":1249377,\"vin\":[{\"txid\":\"350fdd859fc0084df96a8cb83ce645347af093022ea911ae79af69bf166cb74e\",\"vout\":0,\"scriptSig\":{\"asm\":\"3045022100b474482fbaa52511f54569b99816fff7c8612b9f0b8e25781e4f7927b470386a022001a7425e7b01539c3f0c5c1272ef9836e25053a0205e21277de10c802300a60d[ALL] 02682519210d74a0e6775824b9f7795fd7eed248f3377ebf825fff529cfab3159a\",\"hex\":\"483045022100b474482fbaa52511f54569b99816fff7c8612b9f0b8e25781e4f7927b470386a022001a7425e7b01539c3f0c5c1272ef9836e25053a0205e21277de10c802300a60d012102682519210d74a0e6775824b9f7795fd7eed248f3377ebf825fff529cfab3159a\"},\"sequence\":4294967294}],\"vout\":[{\"value\":3.50705867,\"n\":0,\"scriptPubKey\":{\"asm\":\"OP_HASH160 301bcc9b8f9da40ac11370cdd9cb1fc1f7ad5a63 OP_EQUAL\",\"hex\":\"a914301bcc9b8f9da40ac11370cdd9cb1fc1f7ad5a6387\",\"reqSigs\":1,\"type\":\"scripthash\",\"addresses\":[\"2Mwdbj1y2gXf2kRKD4SGSF8qMtutx4iht6n\"]}},{\"value\":4598.37112469,\"n\":1,\"scriptPubKey\":{\"asm\":\"OP_DUP OP_HASH160 dfa004763594c375eca64465ef0c3117459d70cc OP_EQUALVERIFY OP_CHECKSIG\",\"hex\":\"76a914dfa004763594c375eca64465ef0c3117459d70cc88ac\",\"reqSigs\":1,\"type\":\"pubkeyhash\",\"addresses\":[\"n1uNg3AKCNgM6srdZPPRZGkGZjRaRzZAwg\"]}}],\"hex\":\"02000000014eb76c16bf69af79ae11a92e0293f07a3445e63cb88c6af94d08c09f85dd0f35000000006b483045022100b474482fbaa52511f54569b99816fff7c8612b9f0b8e25781e4f7927b470386a022001a7425e7b01539c3f0c5c1272ef9836e25053a0205e21277de10c802300a60d012102682519210d74a0e6775824b9f7795fd7eed248f3377ebf825fff529cfab3159afeffffff02cb58e7140000000017a914301bcc9b8f9da40ac11370cdd9cb1fc1f7ad5a638795806d106b0000001976a914dfa004763594c375eca64465ef0c3117459d70cc88ac61101300\",\"blockhash\":\"0000000093b4a314d118c3fcf7912fa5a6546164d5a2eb59ddbdcd0d7089952f\",\"confirmations\":1,\"time\":1511930260,\"blocktime\":1511930260}"
```